#!/usr/bin/env ruby
$board_row_1 = ' 1 | 2 | 3 '
$board_row_2 = ' 4 | 5 | 6 '
$board_row_3 = ' 7 | 8 | 9 '

def display_board
  p $board_row_1
  p $board_row_2
  p $board_row_3
end

p 'How to play:'
p 'Tic tac toe is a game for two players who will take turns to mark the spaces of a 3x3 grid, the first player who place three of their marks in a horizontal, vertical, or diagonal row wins'
p 'To play with this program, first enter a name for each of the players, when you are ready type the number where you want to put your mark and hit enter. The game will let you know when is your turn'

p 'Enter a name for player 1:'
$player_1 = gets.chomp
p 'Enter a name for player 2:'
$player_2 = gets.chomp
while $player_1 == $player_2
  p "Use a diferent name for player 2"
  $player_2 = gets.chomp
end

class Player_move
  @turn = 'x'
  @count = 0
  def self.board_check
    player_mark = gets.chomp
    @valid_turn = false
    $board_row_1.length.times do |n|
      if player_mark == $board_row_1[n] and player_mark != "|" and player_mark != " "
        $board_row_1[n] = @turn
        @valid_turn = true
      end
    end
    $board_row_2.length.times do |n|
      if player_mark == $board_row_2[n] and player_mark != "|" and player_mark != " "
        $board_row_2[n] = @turn
        @valid_turn = true
      end
    end
    $board_row_3.length.times do |n|
      if player_mark == $board_row_3[n] and player_mark != "|" and player_mark != " "
        $board_row_3[n] = @turn
        @valid_turn = true
      end
    end
    @count += 1 if @valid_turn
    return puts "Please enter a valid character" unless @valid_turn
  end

  def self.make_a_move
    current_player = $player_1
    p "It's #{@count}'s turn!"
    display_board
    p 'Make your move:'
    Player_move.board_check

  end
end


9.times {Player_move.make_a_move}
